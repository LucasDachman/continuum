(window["webpackJsonpcontinuum-client"]=window["webpackJsonpcontinuum-client"]||[]).push([[0],{111:function(e,t){},114:function(e,t,n){"use strict";n.r(t);var r=n(15),a=n.n(r),c=n(25),i=n(0),o=n.n(i),s=n(23),l=n.n(s),u=n(4),h=n(2),p=n(3),f=n(5),m=n(16),y=n(1),b=n.n(y);var d=function(e){var t=b.a.Frequency(e,"midi"),n=t.toNote();return{name:n,frequency:t.toFrequency(),color:n.includes("#")?"black":"white",midi:e}},v=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],g=n(39),O=n(6),j=n.n(O),w=[].concat(Object(m.a)(Object(g.a)("E3 minor").notes),Object(m.a)(Object(g.a)("E4 minor").notes)).map(function(e){var t=b.a.Frequency(e,"note");return{name:e,frequency:t.toFrequency(),color:e.includes("#")?"black":"white",midi:t.toMidi()}}),E=function(){return{initialState:{composition:Object(O.range)(14).map(function(e){return Object(O.range)(16).map(function(){return{active:!1,note:w[e],keyIndex:e}})})},reducers:{setCompositionCell:function(e,t){var n=t.payload,r=n.row,a=n.col,c=n.active;e.composition[r][a].active=c},transpose:function(e,t){var n=t.payload.semitones;e.composition=e.composition.map(function(e){return e.map(function(e){return d(e.midi+n)})})}}}};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C=E(),P=Object(f.b)({slice:"bass",initialState:S({length:.07,shape:0,filter:{decay:.5,range:.3769,q:.1}},C.initialState),reducers:S({},C.reducers,{setLength:function(e,t){e.length=t.payload},setShape:function(e,t){e.shape=t.payload},setFilterDecay:function(e,t){e.filter.decay=t.payload},setFilterRange:function(e,t){e.filter.range=t.payload},setFilterQ:function(e,t){e.filter.q=t.payload}})}),D=P.actions,F=D.setCompositionCell,q=D.setLength,R=D.setShape,x=D.setFilterDecay,A=D.setFilterRange,N=D.setFilterQ,L=P.reducer,_=n(9),T=function(e){var t=e.strokeWidth,n=e.stroke,r=Object(_.useCircularInputContext)(),a=r.getPointFromValue,c=r.center,s=a(),l=s.x,u=s.y,h=Object(i.useRef)(null);return Object(_.useCircularDrag)(h),o.a.createElement("g",null,o.a.createElement("line",{x1:c.x,y1:c.y,x2:l,y2:u,stroke:n,strokeWidth:t}),o.a.createElement("circle",{ref:h,cx:l,cy:u,r:20,stroke:"white",opacity:0}))},I=Object(i.memo)(function(e){var t=e.value,n=e.onChange,r=e.children,a=e.disabled,c=Object(i.useCallback)(Object(O.throttle)(function(e){n(e)},100),[n]),s=Object(h.d)(function(e){return e.character.character}),l=a?"lightgray":"black",u=a?"lightgray":"var(--".concat(s,"Color)");return o.a.createElement("div",{className:"knob"},o.a.createElement("div",null,o.a.createElement(_.CircularInput,{radius:21,value:t,onChange:a?function(){}:c},o.a.createElement(_.CircularTrack,{stroke:"lightgray",strokeWidth:1,strokeLinecap:"square"}),o.a.createElement(_.CircularProgress,{style:{transition:"stroke 1s"},stroke:u,strokeWidth:2,strokeLinecap:"square"}),o.a.createElement(T,{strokeWidth:2,stroke:u}))),o.a.createElement("div",{style:{color:l,zIndex:-1}},r))}),M={setCompositionCell:F,setLength:q,setShape:R,setFilterDecay:x,setFilterRange:A,setFilterQ:N},Q=Object(h.b)(function(e){return{length:e.bass.length,shape:e.bass.shape,filterDecay:e.bass.filter.decay,filterRange:e.bass.filter.range,filterQ:e.bass.filter.q,currentCharacter:e.character.character}},M)(function(e){var t=e.setLength,n=e.setShape,r=e.setFilterDecay,a=e.setFilterRange,c=e.setFilterQ,i=e.length,s=e.shape,l=e.filterDecay,u=e.filterRange,h=e.filterQ,p="bass"!==e.currentCharacter;return o.a.createElement("div",{className:"bass-synth synth ".concat(p?"":"current"," ")},o.a.createElement("div",{className:"knob-row"},o.a.createElement(I,{disabled:p,value:i,onChange:t},"Length"),o.a.createElement(I,{disabled:p,value:s,onChange:n},"Shape"),o.a.createElement(I,{disabled:p,value:l,onChange:r},"Decay"),o.a.createElement(I,{disabled:p,value:u,onChange:a},"Brightness"),o.a.createElement(I,{disabled:p,value:h,onChange:c},"Harshness")))});function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W=E(),H=Object(f.b)({slice:"synth1",initialState:B({amp:{attack:0,decay:.5,sustain:1,release:.2},filter:{attack:0,decay:.5,sustain:1,release:.2,base:0,range:.5,q:0}},W.initialState),reducers:B({setAmp:function(e,t){for(var n=0,r=Object.entries(t.payload);n<r.length;n++){var a=r[n],c=Object(u.a)(a,2),i=c[0],o=c[1];e.amp[i]=o}},setFilter:function(e,t){for(var n=0,r=Object.entries(t.payload);n<r.length;n++){var a=r[n],c=Object(u.a)(a,2),i=c[0],o=c[1];e.filter[i]=o}}},W.reducers)}),z=H.actions,G=(z.setAmp,z.setFilter,z.setCompositionCell),U=H.reducer;function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Y=E(),K=Object(f.b)({slice:"lenny",initialState:X({reverb:0,length:.25,phaser:!1,vibratoDepth:.1},Y.initialState),reducers:X({},Y.reducers,{setReverb:function(e,t){e.reverb=t.payload},setLength:function(e,t){e.length=t.payload},setPhaser:function(e,t){e.phaser=t.payload},setVibratoDepth:function(e,t){e.vibratoDepth=t.payload}})}),Z=K.actions,$=Z.setCompositionCell,ee=Z.setReverb,te=Z.setLength,ne=Z.setPhaser,re=Z.setVibratoDepth,ae=K.reducer,ce=(n(47),{synth1:G,bass:F,lenny:$}),ie=Object(i.memo)(function(e){var t=e.row,n=e.col,r=e.playing,a=Object(h.c)(),c=Object(h.d)(function(e){return e.character.character}),s=Object(h.d)(function(e){return e.util.maxReached}),l={synth1:Object(h.d)(function(e){return e.synth1.composition[t][n]}),bass:Object(h.d)(function(e){return e.bass.composition[t][n]}),lenny:Object(h.d)(function(e){return e.lenny.composition[t][n]})},u=Object(i.useCallback)(function(e){if(e.stopPropagation(),Boolean(ce[c])){var r=!l[c].active;if(r&&s)return;a(ce[c]({row:t,col:n,active:r}))}},[t,n,c,a,l,s]),p="piano-cell";return c in l&&(p+=" clickable"),r&&(p+=" playing"),o.a.createElement("span",{className:p,onClick:u},j.a.map(l,function(e,t){if(e.active){var n="cell-trigger "+"cell-trigger-".concat(t," ")+"".concat(r?"playing":""," ")+"".concat(c===t?"current":""," ");return o.a.createElement("span",{key:t,onClick:u,className:n})}}))}),oe=(n(48),function(e){var t=e.currentStep,n=Object(h.d)(function(e){return e.character.character});return o.a.createElement("div",{className:"piano-roll ".concat(n)},o.a.createElement("section",{className:"piano-roll-editor"},w.map(function(e,n){return o.a.createElement("section",{key:e.name,className:"step-row"},Object(O.range)(16).map(function(e){return o.a.createElement(ie,{key:e,row:n,col:e,playing:t===e})}))})))}),se=(n(88),n(63)),le=n.n(se),ue=n(64),he=n.n(ue),pe=n(65),fe=n.n(pe),me=n(66),ye=n.n(me),be=n(67),de=n.n(be),ve=n(68),ge=n.n(ve),Oe=n(69),je=n.n(Oe);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ke=[le.a,he.a,fe.a,ye.a,de.a,ge.a,je.a].map(function(e,t){return{path:e,name:e.match(/\w*_\d\d(?=\.)/)[0]||"default",index:String(t)}}),Se=E(),Ce=Object(f.b)({slice:"drummer",initialState:Ee({files:ke,filterFreq:1,delay:.1},Se.initialState),reducers:Ee({},Se.reducers,{setFilterFreq:function(e,t){e.filterFreq=t.payload},setDelay:function(e,t){e.delay=t.payload}})}),Pe=Ce.actions,De=Pe.setCompositionCell,Fe=Pe.setFilterFreq,qe=Pe.setDelay,Re=Ce.reducer,xe=Object(i.memo)(function(e){var t=e.row,n=e.col,r=e.playing,a=Object(h.c)(),c=Object(h.d)(function(e){return e.character.character}),s=Object(h.d)(function(e){return e.drummer.composition[t][n]}),l=Object(h.d)(function(e){return e.util.maxReached}),u=Object(i.useCallback)(function(e){if(e.stopPropagation(),"drummer"===c){var r=!s.active;if(r&&l)return;a(De({row:t,col:n,active:r}))}},[t,n,a,c,s,l]),p="drummer"===c,f="piano-cell";return p&&(f+=" clickable"),r&&(f+=" playing"),o.a.createElement("span",{className:f,onClick:u},s.active&&o.a.createElement("span",{onClick:u,className:"cell-trigger cell-trigger-drummer "+"".concat(r?"playing":""," ")+"".concat(p?"current":"")}))}),Ae=function(e){var t=e.currentStep,n=Object(h.d)(function(e){return e.drummer.files}),r=Object(h.d)(function(e){return e.character.character});return o.a.createElement("div",{className:"piano-roll drum-sequencer ".concat("drummer"===r?"drummer":"")},o.a.createElement("section",{className:"piano-roll-editor"},n.map(function(e,n){return o.a.createElement("section",{key:e.name,className:"step-row"},Object(O.range)(16).map(function(e){return o.a.createElement(xe,{key:e,row:n,col:e,playing:t===e})}))})))},Ne={setReverb:ee,setLength:te,setPhaser:ne,setVibratoDepth:re},Le=Object(h.b)(function(e){return{reverb:e.lenny.reverb,length:e.lenny.length,phaser:e.lenny.phaser,vibratoDepth:e.lenny.vibratoDepth,currentCharacter:e.character.character}},Ne)(function(e){var t=e.reverb,n=e.setReverb,r=e.length,a=e.setLength,c=e.phaser,s=e.setPhaser,l=e.vibratoDepth,u=e.setVibratoDepth,h="lenny"!==e.currentCharacter;return o.a.createElement("div",{className:"lenny-synth synth ".concat(h?"":"current"," ")},o.a.createElement("div",{className:"knob-row knob-row-vertical"},o.a.createElement(I,{disabled:h,value:r,onChange:a},"Length"),o.a.createElement(I,{disabled:h,value:t,onChange:n},"Space"),o.a.createElement("input",{type:"checkbox",checked:c,onChange:Object(i.useCallback)(function(e){return s(e.target.checked)},[s])}),o.a.createElement(I,{disabled:h,value:l,onChange:u},"Wiggle")))}),_e={setFilterFreq:Fe,setDelay:qe},Te=Object(h.b)(function(e){return{filterFreq:e.drummer.filterFreq,delay:e.drummer.delay,currentCharacter:e.character.character}},_e)(function(e){var t=e.filterFreq,n=e.setFilterFreq,r=e.delay,a=e.setDelay,c="drummer"!==e.currentCharacter;return o.a.createElement("div",{className:"drummer-synth synth ".concat(c?"":"current"," ")},o.a.createElement("div",{className:"knob-row knob-row-horizontal"},o.a.createElement(I,{value:t,onChange:n,disabled:c},"Brightness"),o.a.createElement(I,{value:r,onChange:a,disabled:c},"Delay")))}),Ie=Object(h.b)(function(e){return{numActive:e.util.numActive,maxReached:e.util.maxReached}},null)(function(e){var t=e.numActive,n=e.maxReached,r=Object(i.useState)(0),a=Object(u.a)(r,2),c=a[0],s=a[1],l=Object(i.useState)(v[0]),h=Object(u.a)(l,2),p=h[0],f=h[1],m=Object(i.useState)("major"),y=Object(u.a)(m,2),b=y[0],d=y[1],g=Object(i.useCallback)(function(e){f(e.target.value)},[f]),O=Object(i.useCallback)(function(e){d(e.target.value)},[d]);return Object(i.useEffect)(function(){Ct.onTick=function(e){s(e)}},[]),o.a.createElement("main",null,o.a.createElement("section",{id:"control-panel"},o.a.createElement("h1",null,"Continuum"),o.a.createElement("select",{value:p,onChange:g},v.map(function(e){return o.a.createElement("option",{key:e,value:e},e)})),o.a.createElement("select",{value:b,onChange:O},o.a.createElement("option",{value:"Major"},"Major"),o.a.createElement("option",{value:"Minor"},"Minor")),o.a.createElement("h1",{id:"num-active"},n?"MAX":t)),o.a.createElement(Q,null),o.a.createElement(Le,null),o.a.createElement(Te,null),o.a.createElement("section",{id:"sequencer"},o.a.createElement(oe,{currentStep:c}),o.a.createElement(Ae,{currentStep:c})))}),Me=n(70),Qe=n.n(Me),Ve=n(7),Be=function e(t){var n=this;if(Object(Ve.a)(this,e),this.name=null,this.triggerAttack=function(e){n.synth.triggerAttack(e)},this.triggerRelease=function(e){n.synth.triggerRelease(e)},this.triggerAttackRelease=function(e,t,r){n.synth.triggerAttackRelease(e,t,r)},this.setAmpAttack=function(e){n.synth.set({envelope:{attack:e+.01}})},this.setAmpDecay=function(e){n.synth.set({envelope:{decay:e+.01}})},this.setAmpSustain=function(e){n.synth.set({envelope:{sustain:e}})},this.setAmpRelease=function(e){n.synth.set({envelope:{release:10*e+.01}})},this.setFilterAttack=function(e){n.synth.set({filterEnvelope:{attack:e/5+.01}})},this.setFilterDecay=function(e){n.synth.set({filterEnvelope:{decay:e+.01}})},this.setFilterSustain=function(e){n.synth.set({filterEnvelope:{sustain:e}})},this.setFilterRelease=function(e){n.synth.set({filterEnvelope:{release:100*e+.01}})},this.setFilterBase=function(e){n.synth.set({filterEnvelope:{baseFrequency:500*e+1}})},this.setFilterRange=function(e){n.synth.set({filterEnvelope:{octaves:20*e}})},this.setFilterQ=function(e){n.synth.set({filter:{Q:10*e}})},!t)throw new Error("CSynth constructor requires a name");this.name=t,this.synth=new b.a.PolySynth(6,b.a.MonoSynth).chain(new b.a.Limiter,b.a.Master),this.synth.set({volume:-12,oscillator:{type:"sawtooth"}})},We=function e(t){var n=this;if(Object(Ve.a)(this,e),this.name=null,this.triggerAttack=function(e){n.synth.triggerAttack(e)},this.triggerRelease=function(e){n.synth.triggerRelease(e)},this.triggerAttackRelease=function(e,t,r){n.synth.triggerAttackRelease(e,t,r)},this.setLength=function(e){n.synth.set({envelope:{release:10*e+.01},filterEnvelope:{release:100*e+.01}})},this.setShape=function(e){n.synth.set({filterEnvelope:{attack:e/5+.01}})},this.setFilterDecay=function(e){n.synth.set({filterEnvelope:{decay:e+.01}})},this.setFilterRange=function(e){n.synth.set({filterEnvelope:{octaves:20*e}})},this.setFilterQ=function(e){n.synth.set({filter:{Q:10*e}})},!t)throw new Error("CSynth constructor requires a name");this.name=t,this.synth=new b.a.PolySynth(1,b.a.MonoSynth).chain(new b.a.Limiter,b.a.Master),this.synth.set({volume:-12,detune:-3200,oscillator:{type:"sawtooth"},envelope:{attack:.01,sustain:1,decay:.05},filter:{baseFrequency:6},filterEnvelope:{sustain:.47415415352178325}})},He=n(71),ze=n(72),Ge=n.n(ze),Ue=n(36);function Je(){var e=Object(He.a)(["",".composition.",".",".active"]);return Je=function(){return e},e}var Xe=function(e,t,n){e.subscribe(Ge()(e.getState,t)(n)),n(Object(Ue.get)(e.getState(),t))};function Ye(e,t){var n=t.name;Xe(e,"".concat(n,".amp.attack"),t.setAmpAttack),Xe(e,"".concat(n,".amp.decay"),t.setAmpDecay),Xe(e,"".concat(n,".amp.sustain"),t.setAmpSustain),Xe(e,"".concat(n,".amp.release"),t.setAmpRelease),Xe(e,"".concat(n,".filter.attack"),t.setFilterAttack),Xe(e,"".concat(n,".filter.decay"),t.setFilterDecay),Xe(e,"".concat(n,".filter.sustain"),t.setFilterSustain),Xe(e,"".concat(n,".filter.release"),t.setFilterRelease),Xe(e,"".concat(n,".filter.base"),t.setFilterBase),Xe(e,"".concat(n,".filter.range"),t.setFilterRange),Xe(e,"".concat(n,".filter.q"),t.setFilterQ)}function Ke(e,t){var n=t.name;Xe(e,"".concat(n,".length"),t.setLength),Xe(e,"".concat(n,".shape"),t.setShape),Xe(e,"".concat(n,".filter.decay"),t.setFilterDecay),Xe(e,"".concat(n,".filter.range"),t.setFilterRange),Xe(e,"".concat(n,".filter.q"),t.setFilterQ)}function Ze(e,t){var n=t.name;Xe(e,"".concat(n,".reverb"),t.setReverb),Xe(e,"".concat(n,".length"),t.setLength),Xe(e,"".concat(n,".phaser"),t.setPhaser),Xe(e,"".concat(n,".vibratoDepth"),t.setVibratoDepth)}function $e(e,t){var n=t.name;Xe(e,"".concat(n,".filterFreq"),t.setFilterFreq),Xe(e,"".concat(n,".delay"),t.setDelay)}function et(e,t){for(var n=function(){var t=a[r],n=(c=Object(u.a)(t,2))[0],i=c[1],o=e.getState()[n].composition,s=!0,l=!1,h=void 0;try{for(var p,f=o.entries()[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var m=p.value,y=Object(u.a)(m,2),b=y[0],d=y[1],v=!0,g=!1,O=void 0;try{for(var j,w=function(){var t=j.value,r=(k=Object(u.a)(t,2))[0],a=k[1],c=String.raw(Je(),n,b,r);Xe(e,c,function(e){var t="drummer"===n?String(a.keyIndex):a.note.frequency;e?i.addNote({index:r,freq:t}):i.removeNote({index:r,freq:t})})},E=d.entries()[Symbol.iterator]();!(v=(j=E.next()).done);v=!0){var k;w()}}catch(S){g=!0,O=S}finally{try{v||null==E.return||E.return()}finally{if(g)throw O}}}}catch(S){l=!0,h=S}finally{try{s||null==f.return||f.return()}finally{if(l)throw h}}},r=0,a=Object.entries(t.sequences);r<a.length;r++){var c;n()}}var tt=function(e,t){t.payload.active?e.numActive+=1:e.numActive-=1,e.numActive>=20?e.maxReached=!0:e.maxReached=!1},nt=Object(f.b)({initialState:{message:"Hello, World",startTime:null,nextInterval:0,numActive:0,maxReached:!1},reducers:{setMessage:function(e,t){console.log("change to ",t.payload),e.message=t.payload},setStartTime:function(e,t){e.startTime=t.payload},setNextInterval:function(e,t){e.nextInterval=t.payload}},extraReducers:{"bass/setCompositionCell":tt,"lenny/setCompositionCell":tt,"drummer/setCompositionCell":tt}}),rt=nt.actions,at=(rt.setMessage,rt.setStartTime,rt.setNextInterval),ct=nt.reducer,it=n(73),ot=n(74),st=n.n(ot),lt=Object(f.b)({initialState:{character:null},reducers:{setCharacter:function(e,t){e.character=t.payload.character}}}),ut=lt.actions.setCharacter,ht=lt.reducer;function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return Object(f.a)(ft({reducer:{synth1:U,bass:L,lenny:ae,drummer:Re,util:ct,character:ht},middleware:[].concat(Object(m.a)(Object(f.c)()),Object(m.a)(e))},t&&{preloadedState:t}))};function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var bt=["setCharacter","setNextInterval"],dt=Object({NODE_ENV:"production",PUBLIC_URL:"/continuum",REACT_APP_SERVER_URI:"https://continuum-7.appspot.com"}).REACT_APP_CHAR,vt=function(e){return function(t){return function(t){return function(n){var r=t(n);return bt.includes(n.type)||n.origin||e.emit("action",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{origin:e.id})),r}}}},gt=function(){var e=Object(c.a)(a.a.mark(function e(){var t,n,r,c,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=st()("https://continuum-7.appspot.com",{transports:["websocket"]}),e.next=3,new Promise(function(e){t.on("init",function(t){console.log(t),console.log("You are player ",t.character),n=dt||t.character,e(t.state)})});case 3:return r=e.sent,c=vt(t),(i=mt([c],r)).dispatch(ut({character:n})),t.on("action",function(e){i.dispatch(e)}),t.on("GET_STATE",function(e,t){var n=i.getState();n.character;t(Object(it.a)(n,["character"]))}),!dt&&t.on("CHARACTER_CHANGE",function(e){var n=e.charactersById[t.id];i.dispatch(ut({character:n}))}),e.abrupt("return",i);case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Ot=n(29),jt=function(){function e(t,n){var r=this;Object(Ve.a)(this,e),this.chords=[],this.synth=null,this.frequencyOffset=0,this.addNote=function(e){var t=e.index,n=e.freq,a=r.chords[t];a.includes(n)||a.push(n)},this.removeNote=function(e){var t=e.index,n=e.freq;r.chords[t]=r.chords[t].filter(function(e){return e!==n})},this.synth=t,this.chords=new Array(n).fill(null).map(function(e){return[]})}return Object(Ot.a)(e,[{key:"getNotes",value:function(e){return this.chords[e]||[]}}]),e}(),wt=function(){function e(t){var n=this,r=t.bpm,a=t.numSteps;Object(Ve.a)(this,e),this.step=0,this.numSteps=0,this.onTick=null,this.loop=null,this.sequences={},this._loopCallback=function(e){n._onTick(e,n.step);for(var t=0,r=Object.values(n.sequences);t<r.length;t++){var a=r[t],c=a.getNotes(n.step);c.length>0&&a.synth.triggerAttackRelease(c,"16n",e)}n.step++,n.step>=n.numSteps&&(n.step=0)},this.createSequence=function(e){n.sequences[e.name]=new jt(e,n.numSteps)},this.start=function(){b.a.context.resume(),n.loop.start()},this.stop=function(){n.loop.stop(),n.step=0},this.numSteps=a,b.a.Transport.bpm.value=r,b.a.Transport.start("+0.1"),this.loop=new b.a.Loop(this._loopCallback,"16n"),this.loop.humanize=!0}return Object(Ot.a)(e,[{key:"_onTick",value:function(e,t){var n=this;0===t&&this.onLoop&&b.a.Draw.schedule(function(){n.onLoop(Date.now())},e),this.onTick&&b.a.Draw.schedule(function(){n.onTick(t)},e)}}]),e}(),Et=function(e,t,n){return(e-0)*(n-t)/1+t},kt=function e(t){var n=this;if(Object(Ve.a)(this,e),this.name=null,this.triggerAttackRelease=function(e,t,r){n.synth.triggerAttackRelease(e,t,r)},this.setReverb=function(e){var t,r;n.reverb.roomSize.value=(e-(t=0))*(1-(r=.2))/(1-t)+r},this.setLength=function(e){n.synth.set({envelope:{release:8*e+.01},filterEnvelope:{release:80*e+.01}})},this.setPhaser=function(e){n.phaser.wet.value=e?1:0},this.setVibratoDepth=function(e){n.vibrato.depth.value=e},!t)throw new Error("CSynth constructor requires a name");this.name=t,this.reverb=new b.a.Freeverb,this.vibrato=new b.a.Vibrato,this.phaser=new b.a.Phaser({frequency:.4,octaves:2,baseFrequency:200,Q:18,stages:20}),this.phaser.wet.value=1,this.synth=new b.a.PolySynth(6,b.a.MonoSynth).chain(this.vibrato,this.reverb,this.phaser,new b.a.Limiter,b.a.Master),this.synth.set({volume:-12,detune:-1200,oscillator:{type:"triangle"},filterEnvelope:{attack:.01,decay:1,sustain:1},filter:{Q:0}})},St=function e(t,n){var r=this;Object(Ve.a)(this,e),this.triggerAttackRelease=function(e,t,n){e.forEach(function(e){r.urls[e]&&(r.synth.get(e).restart(n),r.synth.get(e).start(n))})},this.setFilterFreq=function(e){r.filter.frequency.value=Et(Math.pow(e,2),0,1e4)},this.setDelay=function(e){r.delay.feedback.value=Et(e,.2,.5),r.delay.wet.value=Object(O.clamp)(e-.2,0,1)},this.name=t,this.urls=n.reduce(function(e,t){return e[t.index]=t.path,e},{}),this.filter=new b.a.Filter,this.delay=new b.a.FeedbackDelay("8n",.5),this.synth=new b.a.Players(this.urls).chain(this.filter,this.delay,new b.a.Volume(-8),new b.a.Limiter,b.a.Master)};n.d(t,"sequencer",function(){return Ct});var Ct=new wt({bpm:85,numSteps:16});Object(c.a)(a.a.mark(function e(){var t,n,r,c,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt();case 2:return t=e.sent,Ct.onLoop=function(e){t.dispatch(at(e+6e4/85*16))},n=new Be("synth1"),r=new We("bass"),c=new kt("lenny"),i=new St("drummer",t.getState().drummer.files),Ct.createSequence(n),Ct.createSequence(r),Ct.createSequence(c),Ct.createSequence(i),Ye(t,n),Ke(t,r),Ze(t,c),$e(t,i),et(t,Ct),document.getElementById("start-message").innerHTML="Please Click To Continue",e.next=20,Qe()(b.a.context);case 20:s=t.getState().util.nextInterval,console.log(s),0===s?Ct.start():setTimeout(function(){Ct.start()},t.getState().util.nextInterval-Date.now()),l.a.render(o.a.createElement(h.a,{store:t},o.a.createElement(Ie,null)),document.getElementById("root"));case 24:case"end":return e.stop()}},e)}))()},47:function(e,t,n){},48:function(e,t,n){},63:function(e,t,n){e.exports=n.p+"static/media/kick_02.f5e08c6e.wav"},64:function(e,t,n){e.exports=n.p+"static/media/snare_01.16f25651.wav"},65:function(e,t,n){e.exports=n.p+"static/media/rim_01.2369df53.wav"},66:function(e,t,n){e.exports=n.p+"static/media/shaker_snap_01.689d3025.wav"},67:function(e,t,n){e.exports=n.p+"static/media/clap_01.f1089572.wav"},68:function(e,t,n){e.exports=n.p+"static/media/short_cymbal_01.b55be721.wav"},69:function(e,t,n){e.exports=n.p+"static/media/long_cymbal_01.7a357bf3.wav"},76:function(e,t,n){e.exports=n(114)},88:function(e,t,n){}},[[76,1,2]]]);
//# sourceMappingURL=main.3d7f1612.chunk.js.map