{"version":3,"sources":["audio/CSynth.js","../../shared/redux/subscriptions.js","../../shared/util/notes-util.js","../../shared/redux/reducers/synth1UIReducer.js","components/util/Dial.jsx","components/piano-roll/Cell.jsx","components/piano-roll/CellRow.jsx","components/piano-roll/PianoRoll.jsx","components/Synth1/Synth1.jsx","../../shared/redux/reducers/utilReducer.js","../../shared/redux/store.js","socket/socketEmitter.js","components/App.jsx","index.js"],"names":["CSynth","bpm","numSteps","_loopCallback","time","_onTick","step","nextChord","_nextNotes","map","note","frequencyOffset","length","synth","triggerAttackRelease","addNote","index","freq","chord","chords","includes","push","removeNote","filter","value","triggerAttack","frequency","triggerRelease","setAmpAttack","ratio","set","envelope","attack","setAmpDecay","decay","setAmpSustain","sustain","setAmpRelease","release","setFilterAttack","filterEnvelope","setFilterDecay","setFilterSustain","setFilterRelease","setFilterBase","baseFrequency","setFilterRange","octaves","setFilterQ","Q","start","Tone","context","resume","loop","stop","Transport","this","PolySynth","MonoSynth","toMaster","oscillator","type","Array","fill","v","Loop","onTick","Draw","schedule","_templateObject","data","store","path","callback","subscribe","getState","isBlack","color","startNote","arguments","undefined","endNote","notes","_","i","noteNumber","Frequency","name","toNote","toFrequency","console","error","generateNotes","initialComposition","active","synth1UISlice","initialState","amp","base","range","q","composition","numNotes","reducers","setAmp","state","action","_i","_Object$entries","Object","entries","payload","_ref3","_ref2","key","setFilter","_i2","_Object$entries2","_ref6","_ref5","setCompositionCell","_action$payload","row","col","_synth1UISlice$action","actions","memo","onChange","children","className","radius","strokeWidth","r","mapDispatchToProps","connect","cell","useSelector","synth1UI","black","join","handleClick","useCallback","onClick","CellRow","cells","colIndex","activeColumn","n","rowI","frequencyOffsetValues","String","mapDispatch","useSetCallback","attr","isPlaying","useStore","useState","setFrequencyOffset","currentStep","setCurrentStep","useRef","useEffect","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","rowi","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_loop","_ref4","coli","raw","log","concat","_iterator2","err","return","subscribeCSynth","current","handleClickFrequencyOffset","e","Number","currentTarget","id","checked","utilSlice","message","setMessage","middleware","reducer","synth1UIReducer","util","utilReducer","socket","io","transports","result","origin","emit","on","dispatch","createEmitter","emitter","setupListener","makeStore","App","setPlaying","audioContextStarted","setAudioContextStarted","startAudioContext","then","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.03b9ed0f.chunk.js","sourcesContent":["import Tone from 'tone';\n\nexport default class CSynth {\n  constructor({ bpm, numSteps }) {\n    // this.loop.humanize = true;\n    Tone.Transport.bpm.value = bpm;\n    Tone.Transport.start();\n\n    this.synth = new Tone.PolySynth(6, Tone.MonoSynth).toMaster();\n    this.synth.set({\n      oscillator: {\n        type: 'sawtooth'\n      },\n    });\n    this.chords = new Array(numSteps)\n      .fill(null).map(v => []);\n    this.step = 0;\n    this.frequencyOffset = 0;\n    this.loop = new Tone.Loop(this._loopCallback, '16n')\n  }\n\n  _loopCallback = (time) => {\n    this._onTick(time, this.step);\n    const nextChord = this._nextNotes().map(note => note + this.frequencyOffset * 10);\n    nextChord.length > 0 &&\n      this.synth.triggerAttackRelease(nextChord, '16n', time);\n  }\n\n  _onTick(time, step) {\n    if (!this.onTick) return;\n    Tone.Draw.schedule(() => {\n      this.onTick(step);\n    }, time + 0.1)\n  }\n\n  _nextNotes() {\n    let nextChord = this.chords[this.step] || [];\n    this.step++;\n    if (this.step >= this.chords.length) this.step = 0;\n    return nextChord;\n  }\n\n  addNote = ({ index, freq }) => {\n    const chord = this.chords[index];\n    if (!chord.includes(freq)) {\n      chord.push(freq);\n    }\n  }\n\n  removeNote = ({ index, freq }) => {\n    this.chords[index] = this.chords[index].filter(value => value !== freq);\n  }\n\n  triggerAttack = (frequency) => {\n    this.synth.triggerAttack(frequency);\n  }\n\n  triggerRelease = (frequency) => {\n    this.synth.triggerRelease(frequency);\n  }\n\n  setAmpAttack = (ratio) => {\n    this.synth.set({\n      envelope: {\n        attack: ratio + 0.01\n      }\n    });\n  }\n\n  setAmpDecay = (ratio) => {\n    this.synth.set({\n      envelope: {\n        decay: ratio + 0.01\n      }\n    });\n  }\n\n  setAmpSustain = (ratio) => {\n    this.synth.set({\n      envelope: {\n        sustain: ratio\n      }\n    });\n  }\n\n  setAmpRelease = (ratio) => {\n    this.synth.set({\n      envelope: {\n        release: (ratio * 10) + 0.01\n      }\n    });\n  }\n\n  setFilterAttack = (ratio) => {\n    this.synth.set({\n      filterEnvelope: {\n        attack: (ratio / 5) + 0.01\n      }\n    });\n  }\n\n  setFilterDecay = (ratio) => {\n    this.synth.set({\n      filterEnvelope: {\n        decay: ratio + 0.01\n      }\n    });\n  }\n\n  setFilterSustain = (ratio) => {\n    this.synth.set({\n      filterEnvelope: {\n        sustain: ratio\n      }\n    });\n  }\n\n  setFilterRelease = (ratio) => {\n    this.synth.set({\n      filterEnvelope: {\n        release: (ratio * 100) + 0.01\n      }\n    });\n  }\n\n  setFilterBase = (ratio) => {\n    this.synth.set({\n      filterEnvelope: {\n        baseFrequency: (ratio * 500) + 1\n      }\n    });\n  }\n\n  setFilterRange = (ratio) => {\n    this.synth.set({\n      filterEnvelope: {\n        octaves: ratio * 20\n      }\n    });\n  }\n\n  setFilterQ = (ratio) => {\n    this.synth.set({\n      filter: {\n        Q: ratio * 10\n      }\n    })\n  }\n\n  start = () => {\n    Tone.context.resume();\n    // Tone.Transport.start();\n    this.loop.start();\n  }\n\n  stop = () => {\n    // Tone.Transport.stop();\n    this.loop.stop();\n    this.step = 0;\n  }\n}","import _taggedTemplateLiteral from \"/Users/lucas/fall-2019/capstone/continuum-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"/Users/lucas/fall-2019/capstone/continuum-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"synth1UI.composition.\", \".\", \".active\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n// import store from './store';\nimport watch from 'redux-watch';\nimport { get } from 'object-path'; // use redux-watch to subscribe to a certain store value\n// and use the callback to set the initial value\n\nvar subscribe = function subscribe(store, path, callback) {\n  store.subscribe(watch(store.getState, path)(callback)); // callback(get(store.getState(), path));\n};\n\nexport function subscribeCSynth(store, synth) {\n  subscribe(store, 'synth1UI.amp.attack', synth.setAmpAttack);\n  subscribe(store, 'synth1UI.amp.decay', synth.setAmpDecay);\n  subscribe(store, 'synth1UI.amp.sustain', synth.setAmpSustain);\n  subscribe(store, 'synth1UI.amp.release', synth.setAmpRelease);\n  subscribe(store, 'synth1UI.filter.attack', synth.setFilterAttack);\n  subscribe(store, 'synth1UI.filter.decay', synth.setFilterDecay);\n  subscribe(store, 'synth1UI.filter.sustain', synth.setFilterSustain);\n  subscribe(store, 'synth1UI.filter.release', synth.setFilterRelease);\n  subscribe(store, 'synth1UI.filter.base', synth.setFilterBase);\n  subscribe(store, 'synth1UI.filter.range', synth.setFilterRange);\n  subscribe(store, 'synth1UI.filter.q', synth.setFilterQ);\n  var composition = store.getState().synth1UI.composition;\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = composition.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _ref3 = _step.value;\n\n      var _ref2 = _slicedToArray(_ref3, 2);\n\n      var rowi = _ref2[0];\n      var row = _ref2[1];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var _ref4 = _step2.value;\n          _ref5 = _slicedToArray(_ref4, 2);\n          var coli = _ref5[0];\n          var cell = _ref5[1];\n          var path = String.raw(_templateObject(), rowi, coli);\n          subscribe(store, path, function (active) {\n            console.log(\"\".concat(cell.note.name, \" changed to \").concat(active));\n\n            if (active) {\n              synth.addNote({\n                index: coli,\n                freq: cell.note.frequency\n              });\n            } else {\n              synth.removeNote({\n                index: coli,\n                freq: cell.note.frequency\n              });\n            }\n          });\n        };\n\n        for (var _iterator2 = row.entries()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _ref5;\n\n          _loop();\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}","import Tone from 'tone'; // helper functions\n\nexport function isBlack(note) {\n  return note.color === 'black';\n}\nexport function isWhite(note) {\n  return note.color === 'white';\n}\nexport function generateNotes() {\n  var startNote = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var endNote = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 127;\n\n  if (startNote < 0 || endNote > 127) {\n    console.error('note out of range');\n    return;\n  }\n\n  var notes = new Array(endNote - startNote).fill(0).map(function (_, i) {\n    return i + startNote;\n  });\n  notes = notes.map(function (noteNumber) {\n    var freq = Tone.Frequency(noteNumber, 'midi');\n    var name = freq.toNote();\n    return {\n      name: name,\n      frequency: freq.toFrequency(),\n      color: name.includes('#') ? 'black' : 'white'\n    };\n  });\n  return notes;\n}","import _slicedToArray from \"/Users/lucas/fall-2019/capstone/continuum-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { createSlice } from 'redux-starter-kit';\nimport { generateNotes } from '../../util/notes-util';\nvar numNotes = 24;\nvar numSteps = 8;\nvar startNote = 36;\nvar notes = generateNotes(startNote, startNote + numNotes);\nvar initialComposition = new Array(numNotes).fill(null).map(function (_, i) {\n  return new Array(numSteps).fill(null).map(function () {\n    return {\n      active: false,\n      note: notes[i]\n    };\n  });\n});\nvar synth1UISlice = createSlice({\n  initialState: {\n    amp: {\n      attack: 0,\n      decay: 0.5,\n      sustain: 1,\n      release: 0.2\n    },\n    filter: {\n      attack: 0,\n      decay: 0.5,\n      sustain: 1,\n      release: 0.2,\n      base: 0,\n      range: 0.5,\n      q: 0\n    },\n    composition: initialComposition,\n    numNotes: numNotes,\n    numSteps: numSteps,\n    startNote: startNote,\n    notes: notes\n  },\n  reducers: {\n    setAmp: function setAmp(state, action) {\n      // allow for setting arbitrary values\n      for (var _i = 0, _Object$entries = Object.entries(action.payload); _i < _Object$entries.length; _i++) {\n        var _ref3 = _Object$entries[_i];\n\n        var _ref2 = _slicedToArray(_ref3, 2);\n\n        var key = _ref2[0];\n        var value = _ref2[1];\n        state.amp[key] = value;\n      }\n    },\n    setFilter: function setFilter(state, action) {\n      // allow for setting arbitrary values\n      for (var _i2 = 0, _Object$entries2 = Object.entries(action.payload); _i2 < _Object$entries2.length; _i2++) {\n        var _ref6 = _Object$entries2[_i2];\n\n        var _ref5 = _slicedToArray(_ref6, 2);\n\n        var key = _ref5[0];\n        var value = _ref5[1];\n        state.filter[key] = value;\n      }\n    },\n    setCompositionCell: function setCompositionCell(state, action) {\n      var _action$payload = action.payload,\n          row = _action$payload.row,\n          col = _action$payload.col,\n          active = _action$payload.active;\n      state.composition[row][col].active = active;\n    }\n  }\n});\nvar _synth1UISlice$action = synth1UISlice.actions,\n    setAmp = _synth1UISlice$action.setAmp,\n    setFilter = _synth1UISlice$action.setFilter,\n    setCompositionCell = _synth1UISlice$action.setCompositionCell;\nexport { setAmp, setFilter, setCompositionCell };\nexport default synth1UISlice.reducer;","import React, {memo} from 'react';\n\nimport {\n  CircularInput,\n  CircularTrack,\n  CircularProgress,\n  CircularThumb,\n} from 'react-circular-input'\n\nconst Dial = ({ value, onChange, children }) => {\n\n  return (\n    <div className='knob'>\n      <CircularInput radius={28}\n        value={value}\n        onChange={onChange}>\n        <CircularTrack strokeWidth={14} />\n        <CircularProgress strokeWidth={14} />\n        <CircularThumb r='8' />\n      </CircularInput>\n      {children}\n    </div>\n  );\n}\n\nexport default memo(Dial);","import React, { useCallback } from 'react';\nimport { connect, useSelector } from 'react-redux';\nimport { setCompositionCell } from 'continuum-shared/redux/reducers/synth1UIReducer';\nimport { isBlack } from 'continuum-shared/util/notes-util';\n\nconst mapDispatchToProps = {\n  setCompositionCell\n}\n\nconst Cell = ({ row, col, setCompositionCell }) => {\n\n  const cell = useSelector(state => state.synth1UI.composition[row][col]);\n  const black = isBlack(cell.note);\n  const { active } = cell;\n\n  const className = ['piano-cell',\n    black ? 'black' : 'white',\n    active ? 'active' : 'inactive'\n  ].join(' ');\n\n  const handleClick = useCallback(() => {\n    setCompositionCell({ row, col, active: !active })\n  }, [setCompositionCell, row, col, active]);\n\n  return (\n    <span className={className} onClick={handleClick} />\n  );\n}\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(Cell);","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Cell from './Cell';\n\nconst CellRow = ({ row, black }) => {\n\n  const className = black ? 'black' : 'white';\n\n  const cells = useSelector(state => state.synth1UI.composition[row]);\n\n  return (\n    <section className={`step-row ${className}`}>\n      <div className='steps-row'>\n        {cells.map((cell, colIndex) => (\n          <Cell \n            key={`${row}, ${colIndex}`}\n            row={row}\n            col={colIndex}\n          />\n        ))}\n      </div>\n    </section>\n  );\n}\n\n\n\nexport default CellRow;","import React from 'react';\nimport CellRow from './CellRow';\nimport { isBlack } from 'continuum-shared/util/notes-util';\nimport { setCompositionCell } from 'continuum-shared/redux/reducers/synth1UIReducer';\nimport {connect} from 'react-redux';\nimport './piano-roll.css';\n\nconst mapStateToProps = state => ({\n  notes: state.synth1UI.notes,\n  composition: state.synth1UI.composition,\n});\n\nconst mapDispatchToProps = {\n  setCompositionCell\n}\n\nconst PianoRoll = ({ setCompositionCell, activeColumn, notes}) => {\n\n  return (\n    <div className='piano-roll'>\n      <section className='piano-roll-keys'>\n        {notes.map((n) => {\n          const className = ['piano-key', isBlack(n) ? 'black' : 'white'].join(' ');\n          return (\n            <div\n              className={className}\n              key={n.name}>\n              <p>{n.name}</p>\n            </div>\n          );\n        })}\n      </section>\n      <section className='piano-roll-editor'>\n        {notes.map((n, rowI) => (\n          <CellRow\n            row={rowI}\n            black={isBlack(n)}\n            key={rowI} />\n        ))}\n      </section>\n    </div>\n  );\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(PianoRoll);","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { connect, useStore } from 'react-redux';\nimport CSynth from '../../audio/CSynth';\nimport { subscribeCSynth } from 'continuum-shared/redux/subscriptions';\nimport { setAmp, setFilter }from 'continuum-shared/redux/reducers/synth1UIReducer';\nimport Dial from '../util/Dial';\nimport PianoRoll from '../piano-roll/PianoRoll';\n\nconst tickTime = 170;\n\nconst frequencyOffsetValues = new Array(7).fill(null).map((_, i) => String(i - 3));\n\nconst mapDispatch = {\n  setAmp,\n  setFilter,\n};\n\nconst mapStateToProps = state => ({\n  amp: state.synth1UI.amp,\n  filter: state.synth1UI.filter,\n  numSteps: state.synth1UI.numSteps,\n});\n\nconst useSetCallback = (set, attr) => {\n  return useCallback(v => set({ [attr]: v }), [set, attr]);\n}\n\nconst Synth1 = ({ isPlaying, setAmp, setFilter, amp, filter, numSteps }) => {\n\n  const store = useStore();\n\n  const [frequencyOffset, setFrequencyOffset] = useState('0');\n  const [currentStep, setCurrentStep] = useState(0);\n\n  const synth = useRef(new CSynth({bpm: tickTime, numSteps}));\n\n  // runs once on first render\n  useEffect(() => {\n    subscribeCSynth(store, synth.current);\n    synth.current.onTick = step => {\n      setCurrentStep(step);\n    }\n  }, [store]);\n\n  useEffect(() => {\n    if (!synth.current) return;\n    isPlaying ? synth.current.start() : synth.current.stop();\n  }, [isPlaying, synth])\n\n  const handleClickFrequencyOffset = e => {\n    synth.current.frequencyOffset = Number(e.currentTarget.value);\n    setFrequencyOffset(e.currentTarget.value);\n  }\n\n  // actual render code\n  return (\n    <div className='App'>\n      <section id='amp-env'>\n        <h2>Amp Env</h2>\n        <div className='knob-row'>\n          <Dial\n            value={amp.attack}\n            onChange={useSetCallback(setAmp, 'attack')} >\n            Attack\n          </Dial>\n          <Dial\n            value={amp.decay}\n            onChange={useSetCallback(setAmp, 'decay')} >\n            Decay\n          </Dial>\n          <Dial\n            value={amp.sustain}\n            onChange={useSetCallback(setAmp, 'sustain')} >\n            Sustain\n          </Dial>\n          <Dial\n            value={amp.release}\n            onChange={useSetCallback(setAmp, 'release')} >\n            Release\n          </Dial>\n        </div>\n      </section>\n      <section id='filter-env'>\n        <h2>Filter</h2>\n        <div className='knob-row'>\n          <Dial\n            value={filter.attack}\n            onChange={useSetCallback(setFilter, 'attack')} >\n            Attack\n          </Dial>\n          <Dial\n            value={filter.decay}\n            onChange={useSetCallback(setFilter, 'decay')} >\n            Decay\n          </Dial>\n          <Dial\n            value={filter.sustain}\n            onChange={useSetCallback(setFilter, 'sustain')} >\n            Sustain\n          </Dial>\n          <Dial\n            value={filter.release}\n            onChange={useSetCallback(setFilter, 'release')} >\n            Release\n          </Dial>\n          <Dial\n            value={filter.base}\n            onChange={useSetCallback(setFilter, 'base')} >\n            Base\n          </Dial>\n          <Dial\n            value={filter.range}\n            onChange={useSetCallback(setFilter, 'range')} >\n            Range\n          </Dial>\n          <Dial\n            value={filter.q}\n            onChange={useSetCallback(setFilter, 'q')} >\n            Q\n          </Dial>\n        </div>\n      </section>\n      <form id='frequency-offset'>\n        <h3>Frequency Offset</h3>\n        <div>\n          {\n            frequencyOffsetValues.map(value => {\n              return <input type='radio'\n                name='frequency-offset'\n                value={value}\n                key={value}\n                checked={frequencyOffset === value}\n                onChange={handleClickFrequencyOffset}\n              />\n            })\n          }\n        </div>\n      </form>\n      <PianoRoll currentStep={currentStep} />\n    </div>\n  );\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatch\n)(Synth1);\n","import { createSlice } from 'redux-starter-kit';\nvar utilSlice = createSlice({\n  initialState: {\n    message: 'Hello, World'\n  },\n  reducers: {\n    setMessage: function setMessage(state, action) {\n      console.log('change to ', action.payload);\n      state.message = action.payload;\n    }\n  }\n});\nvar setMessage = utilSlice.actions.setMessage;\nexport { setMessage };\nexport default utilSlice.reducer;","import _toConsumableArray from \"/Users/lucas/fall-2019/capstone/continuum-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { configureStore, getDefaultMiddleware } from 'redux-starter-kit';\nimport synth1UIReducer from './reducers/synth1UIReducer';\nimport utilReducer from './reducers/utilReducer';\n\nvar makeStore = function makeStore(middleware) {\n  middleware = middleware ? middleware : [];\n  return configureStore({\n    reducer: {\n      synth1UI: synth1UIReducer,\n      util: utilReducer\n    },\n    middleware: [].concat(_toConsumableArray(getDefaultMiddleware()), _toConsumableArray(middleware))\n  });\n};\n\nexport default makeStore;","import io from 'socket.io-client';\n\nexport const createEmitter = () => {\n\n  const socket = io('http://localhost:4000', {transports: ['websocket']});\n\n  return [\n    // redux middleware\n    store => next => action => {\n      const result = next(action);\n      if (!action.origin) {\n        socket.emit('action', { ...action, origin: socket.id });\n      }\n      return result;\n    },\n    // listen for actions\n    store => {\n      socket.on('action', action => {\n        store.dispatch(action);\n      });\n    }]\n}\n","import React, { useState, useEffect } from 'react';\nimport Synth1 from './Synth1/Synth1';\nimport Tone from 'tone';\nimport startAudioContext from 'startaudiocontext';\nimport './App.css';\nimport { Provider } from 'react-redux';\nimport makeStore from 'continuum-shared/redux/store';\n// import { createLogger } from 'redux-logger';\nimport { createEmitter } from '../socket/socketEmitter';\n\n// const logger = createLogger({\n//   collapsed: true\n// });\nconst [emitter, setupListener] = createEmitter();\nconst store = makeStore([emitter]);\nsetupListener(store);\n\nconst App = () => {\n  const [isPlaying, setPlaying] = useState(false);\n  const [audioContextStarted, setAudioContextStarted] = useState(false);\n\n  // runs once after first render\n  useEffect(() => {\n    startAudioContext(Tone.context).then(() => {\n      setAudioContextStarted(true);\n    });\n  }, []);\n\n  return !audioContextStarted ? 'Click' : (\n    <Provider store={store}>\n      <button id='play-button'\n        onClick={() => setPlaying(!isPlaying)}\n      >\n        {isPlaying ? 'Stop' : 'Play'}\n      </button>\n      <Synth1 isPlaying={isPlaying} />\n    </Provider>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}